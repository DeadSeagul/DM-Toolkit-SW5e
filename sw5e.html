<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aegis Datapad | SW5e</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* üöÄ SCI-FI THEME */
        body {
            background-color: #050510;
            color: #00ffff;
            font-family: 'Courier New', monospace;
            background-image: radial-gradient(circle at 50% 50%, #1a1a2e 0%, #000000 100%);
            min-height: 100vh;
        }
        .card, .bg-gray-900 {
            background-color: rgba(5, 10, 20, 0.95) !important;
            border: 1px solid #00ffff !important;
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.2);
            border-radius: 4px;
        }
        input, select, textarea {
            background-color: rgba(0, 20, 40, 0.8) !important;
            border: 1px solid #0088ff !important;
            color: #00ffff !important;
            font-family: 'Courier New', monospace !important;
            padding: 8px; width: 100%; outline: none; box-shadow: inset 0 0 5px rgba(0, 136, 255, 0.3);
        }
        h1, h2, h3 { color: #ffe81f !important; text-shadow: 0 0 5px rgba(255, 232, 31, 0.5); text-transform: uppercase; }
        button { border-radius: 2px !important; text-transform: uppercase; letter-spacing: 1px; transition: 0.2s; font-weight: bold; }
        button:hover { box-shadow: 0 0 15px currentColor; }
        .tab-button.active { color: #00ffff !important; border-bottom: 2px solid #00ffff; text-shadow: 0 0 8px #00ffff; }
        .tab-button { color: #0088ff; border-bottom: 2px solid transparent; }
        .hidden { display: none; }
        .animate-pulse { animation: pulse 2s infinite; }
        @keyframes pulse { 50% { opacity: .5; } }
    </style>
</head>
<body class="p-4 md:p-8">
    <div class="max-w-6xl mx-auto">
        <div class="flex justify-between items-center mb-6">
            <div><h1 class="text-3xl font-bold">AEGIS DATAPAD</h1><div class="text-xs text-blue-400 tracking-[0.3em]">SW5e SYSTEM</div></div>
            <div class="flex gap-2">
                <a href="index.html" class="bg-gray-900 text-orange-400 border border-orange-500 px-3 py-2 rounded text-xs font-bold hover:bg-gray-800 no-underline">‚öîÔ∏è Fantasy Mode</a>
                <input type="password" id="user-api-key" placeholder="Gemini API Key" class="w-32 text-xs" onchange="localStorage.setItem('sw5e_key', this.value)">
            </div>
        </div>

        <div class="flex flex-wrap gap-2 border-b border-blue-900 pb-2 mb-6">
            <button class="tab-button p-2 text-sm font-bold active" onclick="switchTab('mission')">üì° Mission</button>
            <button class="tab-button p-2 text-sm font-bold" onclick="switchTab('hostiles')">ü§ñ Hostiles</button>
            <button class="tab-button p-2 text-sm font-bold" onclick="switchTab('cargo')">üì¶ Cargo</button>
            <button class="tab-button p-2 text-sm font-bold" onclick="switchTab('ship')">üöÄ Shipyard</button>
            <button class="tab-button p-2 text-sm font-bold" onclick="switchTab('audio')">üîä Audio</button>
        </div>

        <div id="mission" class="tab-content">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="card p-4">
                    <h2 class="text-xl font-bold mb-4">ü™ê Planet Generator</h2>
                    <div class="flex gap-2 mb-2"><select id="planet-type"><option>Terrestrial</option><option>Gas Giant Station</option><option>Asteroid Base</option><option>City World</option></select><select id="planet-vibe"><option>Lawless</option><option>Imperial</option><option>Warzone</option></select></div>
                    <button onclick="genPlanet()" class="w-full bg-blue-900 text-blue-100 font-bold py-2 mb-2 border border-blue-500">Scan Sector</button>
                    <div id="planet-output" class="text-sm text-blue-200 min-h-[4rem]"></div>
                </div>
                <div class="card p-4">
                    <h2 class="text-xl font-bold mb-4">üì° Holonet Rumors</h2>
                    <input type="text" id="hook-prompt" placeholder="Topic..." class="mb-2">
                    <button onclick="genHook()" class="w-full bg-blue-900 text-blue-100 font-bold py-2 mb-2 border border-blue-500">Decrypt</button>
                    <div id="hook-output" class="text-sm text-blue-200 min-h-[4rem]"></div>
                </div>
            </div>
        </div>

        <div id="hostiles" class="tab-content hidden">
            <div class="card p-4">
                <h2 class="text-xl font-bold mb-4">üõ°Ô∏è Trooper / Sith Stats</h2>
                <div class="flex gap-2 mb-2"><input type="text" id="npc-type" placeholder="e.g. Jetpack Trooper"><select id="npc-cr"><option value="1">CR 1</option><option value="5">CR 5</option><option value="10">CR 10</option></select><button onclick="genTrooper()" class="bg-red-900 text-red-100 px-4 border border-red-500">Fab</button></div>
                <div id="npc-output" class="border border-red-900 p-4 rounded min-h-[10rem] text-sm font-mono text-red-300"></div>
            </div>
        </div>

        <div id="cargo" class="tab-content hidden">
            <div class="card p-4">
                <h2 class="text-xl font-bold mb-4">üì¶ Cargo Scanner</h2>
                <div class="flex gap-2 mb-2"><select id="loot-type"><option>Credits</option><option>Weapons</option><option>Ship Parts</option><option>Spice</option></select><button onclick="genLoot()" class="bg-purple-900 text-purple-100 px-4 border border-purple-500">Scan</button></div>
                <div id="loot-output" class="text-sm text-purple-200 space-y-2"></div>
            </div>
        </div>

        <div id="ship" class="tab-content hidden">
            <div class="card p-4">
                <h2 class="text-xl font-bold mb-4">üöÄ Shipyard</h2>
                <div class="flex gap-2 mb-2"><select id="ship-size"><option>Starfighter</option><option>Freighter</option><option>Corvette</option><option>Cruiser</option></select><input type="text" id="ship-role" placeholder="Role"><button onclick="genShip()" class="bg-yellow-900 text-yellow-100 px-4 border border-yellow-500">Build</button></div>
                <div id="ship-output" class="text-sm font-mono text-yellow-200"></div>
            </div>
        </div>

        <div id="audio" class="tab-content hidden">
            <div class="card p-4">
                <h2 class="text-xl font-bold mb-4">üîä Sound Board</h2>
                <div class="grid grid-cols-3 gap-2 mb-6">
                    <button onclick="playTone(800, 'sawtooth')" class="bg-red-900/50 p-4 border border-red-500 text-red-300 hover:bg-red-900">üö® Alert</button>
                    <button onclick="playTone(200, 'sine')" class="bg-blue-900/50 p-4 border border-blue-500 text-blue-300 hover:bg-blue-900">‚ö° Force</button>
                    <button onclick="playTone(1200, 'square')" class="bg-gray-700/50 p-4 border border-gray-500 text-gray-300 hover:bg-gray-700">ü§ñ Droid</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const API_URL = 'https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent';
        document.getElementById('user-api-key').value = localStorage.getItem('sw5e_key') || "";

        function switchTab(id) { document.querySelectorAll('.tab-content').forEach(e=>e.classList.add('hidden')); document.getElementById(id).classList.remove('hidden'); document.querySelectorAll('.tab-button').forEach(b=>b.classList.remove('active')); event.target.classList.add('active'); }
        
        async function callAI(p) {
            const k = document.getElementById('user-api-key').value; if(!k) return "Enter API Key.";
            try { const r=await fetch(`${API_URL}?key=${k}`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({contents:[{parts:[{text:p}]}]})}); const d=await r.json(); return d.candidates[0].content.parts[0].text; } catch(e){return "Error: "+e.message;}
        }

        async function genPlanet() { document.getElementById('planet-output').innerHTML="Scanning..."; const t=await callAI(`Generate SW5e Planet (${document.getElementById('planet-type').value}). Include Name, Atmosphere, Factions.`); document.getElementById('planet-output').innerHTML=t.replace(/\n/g,'<br>'); }
        async function genLoot() { document.getElementById('loot-output').innerHTML="Scanning..."; const t=await callAI(`Generate 5 SW5e items (${document.getElementById('loot-type').value}). Include Credit values.`); document.getElementById('loot-output').innerHTML=t.replace(/\n/g,'<br>'); }
        async function genTrooper() { document.getElementById('npc-output').innerHTML="Fabricating..."; const t=await callAI(`Generate SW5e NPC (${document.getElementById('npc-type').value}, CR ${document.getElementById('npc-cr').value}). JSON format: name, ac, hp, attack.`); document.getElementById('npc-output').innerText=t; }
        async function genShip() { document.getElementById('ship-output').innerHTML="Assembling..."; const t=await callAI(`Generate SW5e Starship Statblock (JSON). Size: ${document.getElementById('ship-size').value}. Role: ${document.getElementById('ship-role').value}. Fields: model, hull, shields, speed, weapons.`); const data = JSON.parse(t.replace(/```json|```/g, '')); document.getElementById('ship-output').innerHTML = `<div class="border-b border-yellow-500 pb-2 mb-2 font-bold text-lg">${data.model}</div><div>HULL: ${data.hull} | SHIELD: ${data.shields} | SPD: ${data.speed}</div><div class="mt-2 text-white">${JSON.stringify(data.weapons)}</div>`; }
        async function genHook() { document.getElementById('hook-output').innerHTML="Decrypting..."; const t=await callAI(`Generate SW5e adventure hook: ${document.getElementById('hook-prompt').value}`); document.getElementById('hook-output').innerHTML=t.replace(/\n/g,'<br>'); }

        const ac = new (window.AudioContext||window.webkitAudioContext)();
        function playTone(freq, type) { if(ac.state==='suspended')ac.resume(); const o=ac.createOscillator(); const g=ac.createGain(); o.type=type; o.frequency.value=freq; o.connect(g); g.connect(ac.destination); g.gain.linearRampToValueAtTime(0, ac.currentTime+0.5); o.start(); o.stop(ac.currentTime+0.5); }
    </script>
</body>
</html>
